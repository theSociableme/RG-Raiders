{"ast":null,"code":"var _jsxFileName = \"/Users/mark.wagner/Dropbox/projects/TheGame/packages/web/pages/quests.tsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport { Box, Heading, HStack, LoadingState, MetaButton, Text, Tooltip } from '@metafam/ds';\nimport { PageContainer } from 'components/Container';\nimport { QuestFilter } from 'components/Quest/QuestFilter';\nimport { QuestList } from 'components/Quest/QuestList';\nimport { HeadComponent } from 'components/Seo';\nimport { usePSeedBalance } from 'lib/hooks/balances';\nimport { useQuestFilter } from 'lib/hooks/quests';\nimport { useRouter } from 'next/router';\nimport React, { useMemo } from 'react';\nimport { isAllowedToCreateQuest } from 'utils/questHelpers';\n\nvar QuestsPage = function QuestsPage() {\n  _s();\n\n  var router = useRouter();\n\n  var _useQuestFilter = useQuestFilter(),\n      quests = _useQuestFilter.quests,\n      aggregates = _useQuestFilter.aggregates,\n      fetching = _useQuestFilter.fetching,\n      error = _useQuestFilter.error,\n      queryVariables = _useQuestFilter.queryVariables,\n      setQueryVariable = _useQuestFilter.setQueryVariable;\n\n  var _usePSeedBalance = usePSeedBalance(),\n      pSeedBalance = _usePSeedBalance.pSeedBalance,\n      fetchingBalance = _usePSeedBalance.fetching;\n\n  var canCreateQuest = useMemo(function () {\n    return isAllowedToCreateQuest(pSeedBalance);\n  }, [pSeedBalance]);\n  return __jsx(PageContainer, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 5\n    }\n  }, __jsx(HeadComponent, {\n    title: \"Metagame's Quests\",\n    description: \"Metagame is a Massive Online Coordination Game! Metagame has some epic quests going on!\",\n    url: \"https://my.metagame.wtf/quests\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }\n  }), __jsx(Box, {\n    w: \"100%\",\n    maxW: \"80rem\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }\n  }, __jsx(HStack, {\n    justify: \"space-between\",\n    w: \"100%\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 9\n    }\n  }, __jsx(Heading, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 11\n    }\n  }, \"Quest explorer\"), __jsx(Tooltip, {\n    label: !canCreateQuest && 'You need to hold at least 100 pSEED to create a quest',\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 11\n    }\n  }, __jsx(MetaButton, {\n    fontFamily: \"mono\" // disabled={!canCreateQuest} // if disabled, tooltip doesn't show...\n    ,\n    isLoading: fetchingBalance,\n    onClick: function onClick() {\n      return canCreateQuest && router.push('/quest/create');\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 13\n    }\n  }, \"New Quest\"))), __jsx(Box, {\n    mt: 8,\n    w: \"100%\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 9\n    }\n  }, __jsx(QuestFilter, {\n    aggregates: aggregates,\n    queryVariables: queryVariables,\n    setQueryVariable: setQueryVariable,\n    quests: quests || [],\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 11\n    }\n  })), __jsx(Box, {\n    mt: 8,\n    w: \"100%\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 9\n    }\n  }, fetching && __jsx(LoadingState, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 24\n    }\n  }), error && __jsx(Text, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 21\n    }\n  }, \"Error: \".concat(error.message)), quests && !fetching && __jsx(QuestList, {\n    quests: quests,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 35\n    }\n  }))));\n};\n\n_s(QuestsPage, \"+hvaHeQEZYqx/tijhRtmfecsPqg=\", false, function () {\n  return [useRouter, useQuestFilter, usePSeedBalance];\n});\n\n_c = QuestsPage;\nexport var __N_SSG = true;\nexport default QuestsPage;\n\nvar _c;\n\n$RefreshReg$(_c, \"QuestsPage\");","map":{"version":3,"sources":["/Users/mark.wagner/Dropbox/projects/TheGame/packages/web/pages/quests.tsx"],"names":["Box","Heading","HStack","LoadingState","MetaButton","Text","Tooltip","PageContainer","QuestFilter","QuestList","HeadComponent","usePSeedBalance","useQuestFilter","useRouter","React","useMemo","isAllowedToCreateQuest","QuestsPage","router","quests","aggregates","fetching","error","queryVariables","setQueryVariable","pSeedBalance","fetchingBalance","canCreateQuest","push","message"],"mappings":"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","sourcesContent":["import {\n  Box,\n  Heading,\n  HStack,\n  LoadingState,\n  MetaButton,\n  Text,\n  Tooltip,\n} from '@metafam/ds';\nimport { PageContainer } from 'components/Container';\nimport { QuestFilter } from 'components/Quest/QuestFilter';\nimport { QuestList } from 'components/Quest/QuestList';\nimport { HeadComponent } from 'components/Seo';\nimport { getSsrClient } from 'graphql/client';\nimport { getQuests } from 'graphql/getQuests';\nimport { usePSeedBalance } from 'lib/hooks/balances';\nimport { useQuestFilter } from 'lib/hooks/quests';\nimport { InferGetStaticPropsType } from 'next';\nimport { useRouter } from 'next/router';\nimport React, { useMemo } from 'react';\nimport { isAllowedToCreateQuest } from 'utils/questHelpers';\n\ntype Props = InferGetStaticPropsType<typeof getStaticProps>;\n\nexport const getStaticProps = async () => {\n  const [ssrClient, ssrCache] = getSsrClient();\n  // This populate the cache server-side\n  await getQuests(undefined, ssrClient);\n\n  return {\n    props: {\n      urqlState: ssrCache.extractData(),\n    },\n    revalidate: 1,\n  };\n};\n\nconst QuestsPage: React.FC<Props> = () => {\n  const router = useRouter();\n  const {\n    quests,\n    aggregates,\n    fetching,\n    error,\n    queryVariables,\n    setQueryVariable,\n  } = useQuestFilter();\n  const { pSeedBalance, fetching: fetchingBalance } = usePSeedBalance();\n  const canCreateQuest = useMemo(() => isAllowedToCreateQuest(pSeedBalance), [\n    pSeedBalance,\n  ]);\n\n  return (\n    <PageContainer>\n      <HeadComponent\n        title=\"Metagame's Quests\"\n        description=\"Metagame is a Massive Online Coordination Game! Metagame has some epic quests going on!\"\n        url=\"https://my.metagame.wtf/quests\"\n      />\n      <Box w=\"100%\" maxW=\"80rem\">\n        <HStack justify=\"space-between\" w=\"100%\">\n          <Heading>Quest explorer</Heading>\n          <Tooltip\n            label={\n              !canCreateQuest &&\n              'You need to hold at least 100 pSEED to create a quest'\n            }\n          >\n            <MetaButton\n              fontFamily=\"mono\"\n              // disabled={!canCreateQuest} // if disabled, tooltip doesn't show...\n              isLoading={fetchingBalance}\n              onClick={() => canCreateQuest && router.push('/quest/create')}\n            >\n              New Quest\n            </MetaButton>\n          </Tooltip>\n        </HStack>\n        <Box mt={8} w=\"100%\">\n          <QuestFilter\n            aggregates={aggregates}\n            queryVariables={queryVariables}\n            setQueryVariable={setQueryVariable}\n            quests={quests || []}\n          />\n        </Box>\n        <Box mt={8} w=\"100%\">\n          {fetching && <LoadingState />}\n          {error && <Text>{`Error: ${error.message}`}</Text>}\n          {quests && !fetching && <QuestList quests={quests} />}\n        </Box>\n      </Box>\n    </PageContainer>\n  );\n};\n\nexport default QuestsPage;\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"var _jsxFileName = \"/Users/mark.wagner/Dropbox/projects/TheGame/packages/web/components/Player/Filter/PlayerFilter.tsx\";\nvar __jsx = React.createElement;\nimport { Button, CloseIcon, FilterTag, Flex, IconButton, Input, InputGroup, InputRightElement, MetaButton, Stack, styled, Text, useBreakpointValue, useDisclosure, Wrap, WrapItem } from '@raidguild/ds';\nimport { DesktopFilters } from 'components/Player/Filter/DesktopFilters';\nimport { MobileFilters } from 'components/Player/Filter/MobileFilters';\nimport { useFiltersUsed } from 'lib/hooks/players';\nimport React, { useCallback, useEffect, useState } from 'react';\nconst Form = styled.form({\n  width: '100%',\n  display: 'flex',\n  justifyContent: 'center',\n  alignItems: 'center'\n});\nexport const PlayerFilter = ({\n  fetching,\n  fetchingMore,\n  aggregates,\n  queryVariables,\n  setQueryVariable,\n  resetFilter,\n  totalCount\n}) => {\n  var _queryVariables$searc;\n\n  const {\n    0: search,\n    1: setSearch\n  } = useState('');\n  const {\n    0: skills,\n    1: setSkills\n  } = useState([]);\n  const {\n    0: playerTypes,\n    1: setPlayerTypes\n  } = useState([]);\n  const {\n    0: timezones,\n    1: setTimezones\n  } = useState([]);\n  const {\n    0: availability,\n    1: setAvailability\n  } = useState(null);\n\n  const onSearch = e => {\n    e.preventDefault();\n\n    if (search.length >= 2) {\n      setQueryVariable('search', `%${search}%`);\n    } else {\n      setSearch('');\n      setQueryVariable('search', '%%');\n    }\n  };\n\n  const filtersUsed = useFiltersUsed(queryVariables);\n  const resetAllFilters = useCallback(() => {\n    resetFilter();\n    setSkills([]);\n    setPlayerTypes([]);\n    setTimezones([]);\n    setAvailability(null);\n  }, [resetFilter]);\n  const isSearchUsed = queryVariables.search !== '%%';\n  const searchText = ((_queryVariables$searc = queryVariables.search) === null || _queryVariables$searc === void 0 ? void 0 : _queryVariables$searc.slice(1, -1)) || '';\n  const isSmallScreen = useBreakpointValue({\n    base: true,\n    md: false\n  });\n  useEffect(() => {\n    setQueryVariable('playerTypeIds', playerTypes.length > 0 ? playerTypes.map(pT => Number.parseInt(pT.value, 10)) : null);\n  }, [setQueryVariable, playerTypes]);\n  useEffect(() => {\n    setQueryVariable('skillIds', skills.length > 0 ? skills.map(s => s.id) : null);\n  }, [setQueryVariable, skills]);\n  useEffect(() => {\n    setQueryVariable('timezones', timezones.length > 0 ? timezones.map(t => t.value) : null);\n  }, [setQueryVariable, timezones]);\n  useEffect(() => {\n    setQueryVariable('availability', availability ? parseInt(availability.value, 10) : 0);\n  }, [setQueryVariable, availability]);\n  const {\n    isOpen,\n    onOpen,\n    onClose\n  } = useDisclosure();\n  return __jsx(React.Fragment, null, __jsx(Form, {\n    onSubmit: onSearch,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 7\n    }\n  }, __jsx(Stack, {\n    spacing: \"4\",\n    w: \"100%\",\n    maxW: \"2xl\",\n    direction: {\n      base: 'column',\n      md: 'row'\n    },\n    align: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 9\n    }\n  }, __jsx(InputGroup, {\n    size: \"lg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 11\n    }\n  }, __jsx(Input, {\n    background: \"dark\",\n    w: \"100%\",\n    type: \"text\",\n    minW: {\n      base: '18rem',\n      sm: 'md',\n      md: 'lg',\n      lg: 'xl'\n    },\n    placeholder: \"SEARCH PLAYERS BY USERNAME OR ETHEREUM ADDRESS\",\n    _placeholder: {\n      color: 'whiteAlpha.500'\n    },\n    value: search,\n    onChange: e => setSearch(e.target.value),\n    size: \"lg\",\n    borderRadius: \"0\",\n    borderColor: \"borderPurple\",\n    fontSize: \"md\",\n    borderWidth: \"2px\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 13\n    }\n  }), search.length > 0 && __jsx(InputRightElement, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 15\n    }\n  }, __jsx(IconButton, {\n    p: \"2\",\n    variant: \"link\",\n    colorScheme: \"white\",\n    icon: __jsx(CloseIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 25\n      }\n    }),\n    onClick: () => {\n      setSearch('');\n      setQueryVariable('search', '%%');\n    },\n    \"aria-label\": \"Clear Search\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 17\n    }\n  }))), __jsx(MetaButton, {\n    type: \"submit\",\n    size: \"lg\",\n    isDisabled: fetching,\n    px: \"16\",\n    display: isSmallScreen ? 'none' : 'flex',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 11\n    }\n  }, \"SEARCH\"))), __jsx(DesktopFilters, {\n    display: isSmallScreen ? 'none' : 'flex',\n    aggregates: aggregates,\n    skills: skills,\n    setSkills: setSkills,\n    playerTypes: playerTypes,\n    setPlayerTypes: setPlayerTypes,\n    timezones: timezones,\n    setTimezones: setTimezones,\n    availability: availability,\n    setAvailability: setAvailability,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 7\n    }\n  }), __jsx(MobileFilters, {\n    aggregates: aggregates,\n    skills: skills,\n    setSkills: setSkills,\n    playerTypes: playerTypes,\n    setPlayerTypes: setPlayerTypes,\n    timezones: timezones,\n    setTimezones: setTimezones,\n    availability: availability,\n    setAvailability: setAvailability,\n    isOpen: isSmallScreen ? isOpen : false,\n    onClose: onClose,\n    filtersUsed: filtersUsed,\n    resetAllFilters: resetAllFilters,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 7\n    }\n  }), filtersUsed && __jsx(Flex, {\n    w: \"100%\",\n    maxW: \"79rem\",\n    justify: \"space-between\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 9\n    }\n  }, __jsx(Wrap, {\n    flex: \"1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 11\n    }\n  }, !isSmallScreen && __jsx(WrapItem, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 15\n    }\n  }, __jsx(Flex, {\n    w: \"100%\",\n    h: \"100%\",\n    justify: \"center\",\n    align: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 17\n    }\n  }, __jsx(Text, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 19\n    }\n  }, \" \", `Selected Filters: `))), isSearchUsed && __jsx(WrapItem, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 15\n    }\n  }, __jsx(FilterTag, {\n    label: searchText,\n    onRemove: () => {\n      setSearch('');\n      setQueryVariable('search', '%%');\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 17\n    }\n  })), playerTypes.map(({\n    value,\n    label\n  }, index) => __jsx(WrapItem, {\n    key: value,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 15\n    }\n  }, __jsx(FilterTag, {\n    label: label,\n    onRemove: () => {\n      const newPlayerTypes = playerTypes.slice();\n      newPlayerTypes.splice(index, 1);\n      setPlayerTypes(newPlayerTypes);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 17\n    }\n  }))), skills.map(({\n    value,\n    label\n  }, index) => __jsx(WrapItem, {\n    key: value,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 15\n    }\n  }, __jsx(FilterTag, {\n    label: label,\n    onRemove: () => {\n      const newSkills = skills.slice();\n      newSkills.splice(index, 1);\n      setSkills(newSkills);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 17\n    }\n  }))), availability && __jsx(WrapItem, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 246,\n      columnNumber: 15\n    }\n  }, __jsx(FilterTag, {\n    label: `Available ≥${availability.value} h/week`,\n    onRemove: () => {\n      setAvailability(null);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 17\n    }\n  })), timezones.map(({\n    value,\n    label\n  }, index) => __jsx(WrapItem, {\n    key: value,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 256,\n      columnNumber: 15\n    }\n  }, __jsx(FilterTag, {\n    label: label,\n    onRemove: () => {\n      const newTimezones = timezones.slice();\n      newTimezones.splice(index, 1);\n      setTimezones(newTimezones);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 257,\n      columnNumber: 17\n    }\n  })))), __jsx(Button, {\n    variant: \"link\",\n    color: \"cyan.400\",\n    onClick: resetAllFilters,\n    minH: \"2.5rem\",\n    display: isSmallScreen ? 'none' : 'flex',\n    p: \"2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 268,\n      columnNumber: 11\n    }\n  }, \"RESET ALL FILTERS\")), (fetchingMore || !fetching) && __jsx(Flex, {\n    justify: \"space-between\",\n    w: \"100%\",\n    maxW: \"79rem\",\n    pr: \"4\",\n    align: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 281,\n      columnNumber: 9\n    }\n  }, __jsx(Text, {\n    fontWeight: \"bold\",\n    fontSize: \"xl\",\n    w: \"100%\",\n    maxW: \"79rem\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 288,\n      columnNumber: 11\n    }\n  }, totalCount, \" player\", totalCount === 1 ? '' : 's'), __jsx(Button, {\n    variant: \"link\",\n    color: \"cyan.400\",\n    onClick: onOpen,\n    size: \"sm\",\n    minH: \"2.5rem\",\n    display: isSmallScreen ? 'flex' : 'none',\n    p: \"2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 291,\n      columnNumber: 11\n    }\n  }, \"FILTER\")));\n};","map":{"version":3,"sources":["/Users/mark.wagner/Dropbox/projects/TheGame/packages/web/components/Player/Filter/PlayerFilter.tsx"],"names":["Button","CloseIcon","FilterTag","Flex","IconButton","Input","InputGroup","InputRightElement","MetaButton","Stack","styled","Text","useBreakpointValue","useDisclosure","Wrap","WrapItem","DesktopFilters","MobileFilters","useFiltersUsed","React","useCallback","useEffect","useState","Form","form","width","display","justifyContent","alignItems","PlayerFilter","fetching","fetchingMore","aggregates","queryVariables","setQueryVariable","resetFilter","totalCount","search","setSearch","skills","setSkills","playerTypes","setPlayerTypes","timezones","setTimezones","availability","setAvailability","onSearch","e","preventDefault","length","filtersUsed","resetAllFilters","isSearchUsed","searchText","slice","isSmallScreen","base","md","map","pT","Number","parseInt","value","s","id","t","isOpen","onOpen","onClose","sm","lg","color","target","label","index","newPlayerTypes","splice","newSkills","newTimezones"],"mappings":"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","sourcesContent":["import {\n  Button,\n  CloseIcon,\n  FilterTag,\n  Flex,\n  IconButton,\n  Input,\n  InputGroup,\n  InputRightElement,\n  MetaButton,\n  Stack,\n  styled,\n  Text,\n  useBreakpointValue,\n  useDisclosure,\n  Wrap,\n  WrapItem,\n} from '@raidguild/ds';\nimport { DesktopFilters } from 'components/Player/Filter/DesktopFilters';\nimport { MobileFilters } from 'components/Player/Filter/MobileFilters';\nimport { GetPlayersQueryVariables } from 'graphql/autogen/types';\nimport {\n  PlayerAggregates,\n  QueryVariableSetter,\n  useFiltersUsed,\n} from 'lib/hooks/players';\nimport React, { useCallback, useEffect, useState } from 'react';\nimport { SkillOption } from 'utils/skillHelpers';\n\nconst Form = styled.form({\n  width: '100%',\n  display: 'flex',\n  justifyContent: 'center',\n  alignItems: 'center',\n});\n\ntype ValueType = { value: string; label: string };\n\ntype Props = {\n  fetching: boolean;\n  fetchingMore: boolean;\n  aggregates: PlayerAggregates;\n  queryVariables: GetPlayersQueryVariables;\n  setQueryVariable: QueryVariableSetter;\n  resetFilter: () => void;\n  totalCount: number;\n};\n\nexport const PlayerFilter: React.FC<Props> = ({\n  fetching,\n  fetchingMore,\n  aggregates,\n  queryVariables,\n  setQueryVariable,\n  resetFilter,\n  totalCount,\n}) => {\n  const [search, setSearch] = useState<string>('');\n\n  const [skills, setSkills] = useState<SkillOption[]>([]);\n  const [playerTypes, setPlayerTypes] = useState<ValueType[]>([]);\n  const [timezones, setTimezones] = useState<ValueType[]>([]);\n  const [availability, setAvailability] = useState<ValueType | null>(null);\n\n  const onSearch = (e: React.ChangeEvent<HTMLFormElement>) => {\n    e.preventDefault();\n    if (search.length >= 2) {\n      setQueryVariable('search', `%${search}%`);\n    } else {\n      setSearch('');\n      setQueryVariable('search', '%%');\n    }\n  };\n\n  const filtersUsed = useFiltersUsed(queryVariables);\n  const resetAllFilters = useCallback(() => {\n    resetFilter();\n    setSkills([]);\n    setPlayerTypes([]);\n    setTimezones([]);\n    setAvailability(null);\n  }, [resetFilter]);\n  const isSearchUsed = queryVariables.search !== '%%';\n  const searchText = queryVariables.search?.slice(1, -1) || '';\n\n  const isSmallScreen = useBreakpointValue({ base: true, md: false });\n\n  useEffect(() => {\n    setQueryVariable(\n      'playerTypeIds',\n      playerTypes.length > 0\n        ? playerTypes.map((pT) => Number.parseInt(pT.value, 10))\n        : null,\n    );\n  }, [setQueryVariable, playerTypes]);\n\n  useEffect(() => {\n    setQueryVariable(\n      'skillIds',\n      skills.length > 0 ? skills.map((s) => s.id) : null,\n    );\n  }, [setQueryVariable, skills]);\n\n  useEffect(() => {\n    setQueryVariable(\n      'timezones',\n      timezones.length > 0 ? timezones.map((t) => t.value) : null,\n    );\n  }, [setQueryVariable, timezones]);\n\n  useEffect(() => {\n    setQueryVariable(\n      'availability',\n      availability ? parseInt(availability.value, 10) : 0,\n    );\n  }, [setQueryVariable, availability]);\n\n  const { isOpen, onOpen, onClose } = useDisclosure();\n\n  return (\n    <>\n      <Form onSubmit={onSearch}>\n        <Stack\n          spacing=\"4\"\n          w=\"100%\"\n          maxW=\"2xl\"\n          direction={{ base: 'column', md: 'row' }}\n          align=\"center\"\n        >\n          <InputGroup size=\"lg\">\n            <Input\n              background=\"dark\"\n              w=\"100%\"\n              type=\"text\"\n              minW={{ base: '18rem', sm: 'md', md: 'lg', lg: 'xl' }}\n              placeholder=\"SEARCH PLAYERS BY USERNAME OR ETHEREUM ADDRESS\"\n              _placeholder={{ color: 'whiteAlpha.500' }}\n              value={search}\n              onChange={(e) => setSearch(e.target.value)}\n              size=\"lg\"\n              borderRadius=\"0\"\n              borderColor=\"borderPurple\"\n              fontSize=\"md\"\n              borderWidth=\"2px\"\n            />\n            {search.length > 0 && (\n              <InputRightElement>\n                <IconButton\n                  p=\"2\"\n                  variant=\"link\"\n                  colorScheme=\"white\"\n                  icon={<CloseIcon />}\n                  onClick={() => {\n                    setSearch('');\n                    setQueryVariable('search', '%%');\n                  }}\n                  aria-label=\"Clear Search\"\n                />\n              </InputRightElement>\n            )}\n          </InputGroup>\n          <MetaButton\n            type=\"submit\"\n            size=\"lg\"\n            isDisabled={fetching}\n            px=\"16\"\n            display={isSmallScreen ? 'none' : 'flex'}\n          >\n            SEARCH\n          </MetaButton>\n        </Stack>\n      </Form>\n      <DesktopFilters\n        display={isSmallScreen ? 'none' : 'flex'}\n        aggregates={aggregates}\n        skills={skills}\n        setSkills={setSkills}\n        playerTypes={playerTypes}\n        setPlayerTypes={setPlayerTypes}\n        timezones={timezones}\n        setTimezones={setTimezones}\n        availability={availability}\n        setAvailability={setAvailability}\n      />\n      <MobileFilters\n        aggregates={aggregates}\n        skills={skills}\n        setSkills={setSkills}\n        playerTypes={playerTypes}\n        setPlayerTypes={setPlayerTypes}\n        timezones={timezones}\n        setTimezones={setTimezones}\n        availability={availability}\n        setAvailability={setAvailability}\n        isOpen={isSmallScreen ? isOpen : false}\n        onClose={onClose}\n        filtersUsed={filtersUsed}\n        resetAllFilters={resetAllFilters}\n      />\n      {filtersUsed && (\n        <Flex w=\"100%\" maxW=\"79rem\" justify=\"space-between\">\n          <Wrap flex=\"1\">\n            {!isSmallScreen && (\n              <WrapItem>\n                <Flex w=\"100%\" h=\"100%\" justify=\"center\" align=\"center\">\n                  <Text> {`Selected Filters: `}</Text>\n                </Flex>\n              </WrapItem>\n            )}\n            {isSearchUsed && (\n              <WrapItem>\n                <FilterTag\n                  label={searchText}\n                  onRemove={() => {\n                    setSearch('');\n                    setQueryVariable('search', '%%');\n                  }}\n                />\n              </WrapItem>\n            )}\n            {playerTypes.map(({ value, label }, index) => (\n              <WrapItem key={value}>\n                <FilterTag\n                  label={label}\n                  onRemove={() => {\n                    const newPlayerTypes = playerTypes.slice();\n                    newPlayerTypes.splice(index, 1);\n                    setPlayerTypes(newPlayerTypes);\n                  }}\n                />\n              </WrapItem>\n            ))}\n            {skills.map(({ value, label }, index) => (\n              <WrapItem key={value}>\n                <FilterTag\n                  label={label}\n                  onRemove={() => {\n                    const newSkills = skills.slice();\n                    newSkills.splice(index, 1);\n                    setSkills(newSkills);\n                  }}\n                />\n              </WrapItem>\n            ))}\n            {availability && (\n              <WrapItem>\n                <FilterTag\n                  label={`Available ≥${availability.value} h/week`}\n                  onRemove={() => {\n                    setAvailability(null);\n                  }}\n                />\n              </WrapItem>\n            )}\n            {timezones.map(({ value, label }, index) => (\n              <WrapItem key={value}>\n                <FilterTag\n                  label={label}\n                  onRemove={() => {\n                    const newTimezones = timezones.slice();\n                    newTimezones.splice(index, 1);\n                    setTimezones(newTimezones);\n                  }}\n                />\n              </WrapItem>\n            ))}\n          </Wrap>\n          <Button\n            variant=\"link\"\n            color=\"cyan.400\"\n            onClick={resetAllFilters}\n            minH=\"2.5rem\"\n            display={isSmallScreen ? 'none' : 'flex'}\n            p=\"2\"\n          >\n            RESET ALL FILTERS\n          </Button>\n        </Flex>\n      )}\n      {(fetchingMore || !fetching) && (\n        <Flex\n          justify=\"space-between\"\n          w=\"100%\"\n          maxW=\"79rem\"\n          pr=\"4\"\n          align=\"center\"\n        >\n          <Text fontWeight=\"bold\" fontSize=\"xl\" w=\"100%\" maxW=\"79rem\">\n            {totalCount} player{totalCount === 1 ? '' : 's'}\n          </Text>\n          <Button\n            variant=\"link\"\n            color=\"cyan.400\"\n            onClick={onOpen}\n            size=\"sm\"\n            minH=\"2.5rem\"\n            display={isSmallScreen ? 'flex' : 'none'}\n            p=\"2\"\n          >\n            FILTER\n          </Button>\n        </Flex>\n      )}\n    </>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}